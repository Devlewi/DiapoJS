<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Album Photos en Javascript</title>
<meta name="description" content="Gérer les contrôles img par le code pour faire défiler les images" />
<meta name="robots" content="index,follow" />
<meta http-equiv="content-language" content="fr" />
<link href='styles/mef.css' rel='stylesheet' type='text/css' />
<script language="javascript" type="text/javascript">

	var i1 = new Image;
	var i2 = new Image;
	var i3 = new Image;
	var i4 = new Image;
	var i5 = new Image;
	var i6 = new Image;
	var i7 = new Image;
	var i8 = new Image;
	
	var i9 = new Image;
	var i10 = new Image;
	var i11 = new Image;
	var i12 = new Image;

	i1.src = "images/01-place-de-grammat-lot.jpg";
	i2.src = "images/02-vue-depuis-Rocamadour-lot.jpg";
	i3.src = "images/03-place-de-cahors-lot.jpg";
	i4.src = "images/04-vue-depuis-saint-cirq-lapopie-lot.jpg";
	i5.src = "images/05-la-cluzas-haute-savoie.jpg";
	i6.src = "images/06-luge-ete-la-cluzas-haute-savoie.jpg";
	i7.src = "images/07-chateau-de-chambord-loir-et-cher.jpg";
	i8.src = "images/08-les-gorges-du-verdon-alpes-de-haute-provence.jpg";
	
	i9.src = "images/09-le-grau-du-roi-gard.jpg";
	i10.src = "images/10-le-pont-du-gard.jpg";
	i11.src = "images/11-le-colorado-du-luberon.jpg";
	i12.src = "images/12-la-dune-du-pilat-gironde.jpg";
	
</script>
</head>
<body>

	<div class="div_conteneur_parent">
	
		<div class="div_conteneur_page">
			<a href="http://www.bonbache.fr/" target="_self">
			<img src="images/le_formateur.png" style="width:50px;border:none;" align="left" alt="formateur informatique" />
			</a>		
			<div class="titre_page"><h1>Mon album Photos</h1></div>
			
			<div class="div_int_page">
			
			<div class="div_saut_ligne">
			</div>						
			
			<div style="float:left;width:10%;height:40px;"></div>
			<div style="float:left;width:80%;height:40px;text-align:center;">
			<div id="GTitre">
			<h1>Gérer un album Photos par le code Javascript</h1>
			</div>
			</div>
			<div style="float:left;width:10%;height:40px;"></div>
			
			<div class="div_saut_ligne" style="height:60px">
			</div>
			
			<div style="width:100%;height:auto;text-align:center;">
			
			<div style="width:800px;display:inline-block;" id="conteneur">
				<div id="centre">
					<div id="barre">
						<input type="button" value="Lancer" style="background: linear-gradient( #555, #2C2C2C);margin-bottom:5px;" /><br />
						<input type="text" id="minutage" value="2" /><br />
						<input type="button" value="Arrêter" style="background: linear-gradient( #555, #2C2C2C);margin-top:5px;" />
					</div>				
					<div class="texte_photo" id="texteph" >Titre de la photo</div>
					<div class="miniature">
						<img src="images/image-defaut.jpg" alt="" class="img_miniature" id="mini1" onClick="selection(1)" />
					</div>
					<div class="miniature" style="left:173px;">
						<img src="images/image-defaut.jpg" alt="" class="img_miniature" id="mini2" onClick="selection(2)" />
					</div>
					<div class="miniature" style="left:346px;">
						<img src="images/image-defaut.jpg" alt="" class="img_miniature" id="mini3" onClick="selection(3)" />
					</div>
					<div class="miniature" style="left:519px;">
						<img src="images/image-defaut.jpg" alt="" class="img_miniature" id="mini4" onClick="selection(4)" />
					</div>						
					<div id="precedent">
						<input type="button" value="<<" title="Photo précédente" onClick="defiler('arriere')" />
					</div>
					<div style="position:absolute;">
						<img src="images/image-defaut.jpg" alt="" id="album"/>
					</div>
					<div id="suivant">
						<input type="button" value=">>" title="Photo suivante" onClick="defiler('avant')" />
					</div>			
				</div>
			</div>
			
			</div>

			<div class="div_saut_ligne" style="height:150px;">
			</div>	
			
			</div>
		</div>
	
	</div>
	
</body>
<script type="text/javascript" language="javascript">

	var chaine_img="01-place-de-grammat-lot.jpg;02-vue-depuis-Rocamadour-lot.jpg;03-place-de-cahors-lot.jpg;04-vue-depuis-saint-cirq-lapopie-lot.jpg;"
	chaine_img += "05-la-cluzas-haute-savoie.jpg;06-luge-ete-la-cluzas-haute-savoie.jpg;07-chateau-de-chambord-loir-et-cher.jpg;08-les-gorges-du-verdon-alpes-de-haute-provence.jpg";
	chaine_img += ";09-le-grau-du-roi-gard.jpg;10-le-pont-du-gard.jpg;11-le-colorado-du-luberon.jpg;12-la-dune-du-pilat-gironde.jpg";	

	var tab_img=chaine_img.split(';');
	var nb_img = tab_img.length;
	var chemin ="images/";
	var position = 0;
	
	document.getElementById("album").src=chemin + tab_img[position];
	document.getElementById("mini1").src=chemin + tab_img[position];
	document.getElementById("mini2").src=chemin + tab_img[position+1];
	document.getElementById("mini3").src=chemin + tab_img[position+2];
	document.getElementById("mini4").src=chemin + tab_img[position+3];
	document.getElementById("mini1").style.border="#84020b 3px solid";

	traite_texte(tab_img[position]);

	function defiler(comment)
	{	

		if(comment=="avant")
			position++;
		else
			position--;
			
		if(position<0)
		{
			position = nb_img-1;
			document.getElementById("mini1").src=chemin + tab_img[position-3];
			document.getElementById("mini2").src=chemin + tab_img[position-2];
			document.getElementById("mini3").src=chemin + tab_img[position-1];
			document.getElementById("mini4").src=chemin + tab_img[position];					
			
		}
		else if(position == nb_img)
		{
			position = 0;
			document.getElementById("mini1").src=chemin + tab_img[position];
			document.getElementById("mini2").src=chemin + tab_img[position+1];
			document.getElementById("mini3").src=chemin + tab_img[position+2];
			document.getElementById("mini4").src=chemin + tab_img[position+3];			
		}
		else if(position % 4 ==0 && comment=="avant")
		{
			document.getElementById("mini1").src=chemin + tab_img[position];
			document.getElementById("mini2").src=chemin + tab_img[position+1];
			document.getElementById("mini3").src=chemin + tab_img[position+2];
			document.getElementById("mini4").src=chemin + tab_img[position+3];			
		}
		else if((position+1) % 4 ==0 && comment=="arriere" && position!=0)
		{
			document.getElementById("mini1").src=chemin + tab_img[position-3];
			document.getElementById("mini2").src=chemin + tab_img[position-2];
			document.getElementById("mini3").src=chemin + tab_img[position-1];
			document.getElementById("mini4").src=chemin + tab_img[position];			
		}

		document.getElementById("album").src=chemin + tab_img[position];

		for(var indice=1;indice<5;indice++)
		{
			document.getElementById("mini" + indice).style.border="#333 1px solid";
			if(document.getElementById("mini" + indice).src==document.getElementById("album").src)
				document.getElementById("mini" + indice).style.border="#84020b 3px solid";
		}

		traite_texte(tab_img[position]);	
	}
	
	function selection(img_source)
	{
		var image_en_cours = document.getElementById("mini" + img_source).src;
		var pos_caractere = image_en_cours.lastIndexOf("/",image_en_cours);
		
		document.getElementById("album").src=image_en_cours;
		
		for(var indice=1;indice<5;indice++)
		{
			document.getElementById("mini" + indice).style.border="#333 1px solid";
		}		
		document.getElementById("mini" + img_source).style.border="#84020b 3px solid";
		
		//alert(image_en_cours);
		//alert(pos_caractere);
		
		image_en_cours = image_en_cours.substring(pos_caractere+1);
		//alert(image_en_cours);			
			
		for(var defil=0;defil<nb_img;defil++)
		{
			//alert(tab_img[defil]);
			if(tab_img[defil]==image_en_cours)
			{
				position=defil;
				break;
			}
		}

		traite_texte(image_en_cours);
		
	}
	
	function traite_texte(texte)
	{
		var chaine="";
		var tab_mots=texte.replace(".jpg","").split('-');

		//départ 1 pour ignorer numéro préfixe photo.
		for(var compteur=1;compteur<tab_mots.length;compteur++)
		{
			//Majuscule en début de mot si plus de deux lettres
			if(tab_mots[compteur].length>2 || compteur==1)
				chaine += tab_mots[compteur].substr(0,1).toUpperCase() + tab_mots[compteur].substr(1).toLowerCase() + " ";
			else
				chaine += tab_mots[compteur] + " ";
		}

		document.getElementById("texteph").innerText = chaine;
	}	
	
</script>
</html>
	